<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DAOS API: dtx_redundancy_group Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="daos_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DAOS API
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('structdtx__redundancy__group.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">dtx_redundancy_group Struct Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="dtx_8h_source.html">dtx.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:abe823d82c10abe2b1ae4fa214d0e4862"><td class="memItemLeft" align="right" valign="top"><a id="abe823d82c10abe2b1ae4fa214d0e4862"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>drg_tgt_cnt</b></td></tr>
<tr class="separator:abe823d82c10abe2b1ae4fa214d0e4862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2450945bfadc9fead95671aa9c718fb6"><td class="memItemLeft" align="right" valign="top"><a id="a2450945bfadc9fead95671aa9c718fb6"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>drg_redundancy</b></td></tr>
<tr class="separator:a2450945bfadc9fead95671aa9c718fb6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7579181a4c707b1ceb60d3329b5de7f5"><td class="memItemLeft" align="right" valign="top"><a id="a7579181a4c707b1ceb60d3329b5de7f5"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><b>drg_flags</b></td></tr>
<tr class="separator:a7579181a4c707b1ceb60d3329b5de7f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab81a69b32f8d22023f78ae6ffcefa24"><td class="memItemLeft" align="right" valign="top"><a id="aab81a69b32f8d22023f78ae6ffcefa24"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><b>drg_ids</b> [0]</td></tr>
<tr class="separator:aab81a69b32f8d22023f78ae6ffcefa24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The items (replica or EC shard) belong to the same redundancy group make up a modification group that is subset of related DAOS redundancy group.</p>
<p>These information will be used for DTX recovery as following:</p>
<p>During DTX recovery, for a non-committed DTX, its new leader queries with other alive participants for such DTX status. If all alive ones reply the new leader with 'prepared', then before making the decision to commit the DTX, we need to handle some corner cases:</p>
<p>Some corrupted DTX participant may have ever refused (because of conflict with other DTX that may be committed or may be not) related modification. But it did not reply to the old leader before its corruption, or did but the old leader crashed before abort such DTX. If the case happened on all members in some modification group, then when DTX recovery, nobody knows there have ever been DTX conflict. Under such case, the new leader should NOT commit such DTX, otherwise, it will break DAOS transaction semantics for other conflict DTXs. On the other hand, abort such DTX is also NOT a safe solution, because it is possible that the corrupted DTX participant may have committed such DTX before its (and the old leader) corruption.</p>
<p>So once we detect some group corruption or lost during the DTX recovery, we can neither commit nor abort related DTX to avoid further damage the system. Instead, we can mark it with some flags and introduce more human knowledge to recover it sometime later. </p>

<p class="definition">Definition at line <a class="el" href="dtx_8h_source.html#l00082">82</a> of file <a class="el" href="dtx_8h_source.html">dtx.h</a>.</p>
</div><hr/>The documentation for this struct was generated from the following file:<ul>
<li>src/include/daos/<a class="el" href="dtx_8h_source.html">dtx.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="structdtx__redundancy__group.html">dtx_redundancy_group</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
