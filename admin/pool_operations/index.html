



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Distributed Asynchronous Object Storage">
      
      
        <link rel="canonical" href="http://daos.io/admin/pool_operations/">
      
      
        <meta name="author" content="DAOS Project">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.3">
    
    
      
        <title>Pool Operations - DAOS v0.9</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#pool-operations" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://daos.io" title="DAOS v0.9" aria-label="DAOS v0.9" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              DAOS v0.9
            </span>
            <span class="md-header-nav__topic">
              
                Pool Operations
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    daos-stack/daos
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../overview/terminology/" class="md-tabs__link">
          Architecture Overview
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../hardware/" class="md-tabs__link md-tabs__link--active">
          Administration Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../user/container/" class="md-tabs__link">
          User Guide
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../internals/development/" class="md-tabs__link">
          Developer Zone
        </a>
      
    </li>
  

      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://daos.io" title="DAOS v0.9" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    DAOS v0.9
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    daos-stack/daos
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Architecture Overview
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Architecture Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/terminology/" title="Terminology" class="md-nav__link">
      Terminology
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/architecture/" title="Architecture" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/storage/" title="Storage Model" class="md-nav__link">
      Storage Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/transaction/" title="Transaction Model" class="md-nav__link">
      Transaction Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/fault/" title="Fault Model" class="md-nav__link">
      Fault Model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../overview/security/" title="Security Model" class="md-nav__link">
      Security Model
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Administration Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Administration Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../hardware/" title="Hardware Requirements" class="md-nav__link">
      Hardware Requirements
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../installation/" title="Software Installation" class="md-nav__link">
      Software Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../deployment/" title="System Deployment" class="md-nav__link">
      System Deployment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../administration/" title="System Administration" class="md-nav__link">
      System Administration
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Pool Operations
      </label>
    
    <a href="./" title="Pool Operations" class="md-nav__link md-nav__link--active">
      Pool Operations
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pool-creationdestroy" class="md-nav__link">
    Pool Creation/Destroy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-properties" class="md-nav__link">
    Pool Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-access-control-lists" class="md-nav__link">
    Pool Access Control Lists
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-control-entries" class="md-nav__link">
    Access Control Entries
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-pool-with-a-custom-acl" class="md-nav__link">
    Creating a pool with a custom ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-a-pools-acl" class="md-nav__link">
    Displaying a pool's ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-a-pools-acl" class="md-nav__link">
    Modifying a pool's ACL
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overwriting-the-acl" class="md-nav__link">
    Overwriting the ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-entries-in-an-existing-acl" class="md-nav__link">
    Updating entries in an existing ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-an-entry-from-the-acl" class="md-nav__link">
    Removing an entry from the ACL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-query" class="md-nav__link">
    Pool Query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-modifications" class="md-nav__link">
    Pool Modifications
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target-exclusion-and-self-healing" class="md-nav__link">
    Target Exclusion and Self-Healing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-extension" class="md-nav__link">
    Pool Extension
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target-addition-space-rebalancing" class="md-nav__link">
    Target Addition &amp; Space Rebalancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-shard-resize" class="md-nav__link">
    Pool Shard Resize
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-catastrophic-recovery" class="md-nav__link">
    Pool Catastrophic Recovery
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tiering_uns/" title="Tiering and Unified Namespace" class="md-nav__link">
      Tiering and Unified Namespace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../performance_tuning/" title="Performance Tuning" class="md-nav__link">
      Performance Tuning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link">
      Troubleshooting
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../utilities_examples/" title="Utilities and Usage Examples" class="md-nav__link">
      Utilities and Usage Examples
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../env_variables/" title="Environment Variables" class="md-nav__link">
      Environment Variables
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/container/" title="Container Management" class="md-nav__link">
      Container Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/interface/" title="Native Programming Interface" class="md-nav__link">
      Native Programming Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/posix/" title="POSIX Namespace" class="md-nav__link">
      POSIX Namespace
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/hpc/" title="HPC I/O Middleware" class="md-nav__link">
      HPC I/O Middleware
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../user/spark/" title="Spark" class="md-nav__link">
      Spark
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Developer Zone
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Developer Zone
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../internals/development/" title="Dev Environment" class="md-nav__link">
      Dev Environment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="https://github.com/daos-stack/daos/blob/master/src/README.md" title="DAOS Internals" class="md-nav__link">
      DAOS Internals
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wiki.hpdd.intel.com" title="Community Wiki" class="md-nav__link">
      Community Wiki
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://wiki.hpdd.intel.com/display/DC/Roadmap/" title="Roadmap" class="md-nav__link">
      Roadmap
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://daos.groups.io/g/daos" title="Mailing list" class="md-nav__link">
      Mailing list
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="https://jira.hpdd.intel.com/projects/DAOS" title="Issue tracker" class="md-nav__link">
      Issue tracker
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#pool-creationdestroy" class="md-nav__link">
    Pool Creation/Destroy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-properties" class="md-nav__link">
    Pool Properties
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-access-control-lists" class="md-nav__link">
    Pool Access Control Lists
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#access-control-entries" class="md-nav__link">
    Access Control Entries
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#identity" class="md-nav__link">
    Identity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enforcement" class="md-nav__link">
    Enforcement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#limitations" class="md-nav__link">
    Limitations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-pool-with-a-custom-acl" class="md-nav__link">
    Creating a pool with a custom ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#displaying-a-pools-acl" class="md-nav__link">
    Displaying a pool's ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-a-pools-acl" class="md-nav__link">
    Modifying a pool's ACL
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overwriting-the-acl" class="md-nav__link">
    Overwriting the ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updating-entries-in-an-existing-acl" class="md-nav__link">
    Updating entries in an existing ACL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removing-an-entry-from-the-acl" class="md-nav__link">
    Removing an entry from the ACL
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-query" class="md-nav__link">
    Pool Query
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-modifications" class="md-nav__link">
    Pool Modifications
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target-exclusion-and-self-healing" class="md-nav__link">
    Target Exclusion and Self-Healing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-extension" class="md-nav__link">
    Pool Extension
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#target-addition-space-rebalancing" class="md-nav__link">
    Target Addition &amp; Space Rebalancing
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pool-shard-resize" class="md-nav__link">
    Pool Shard Resize
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pool-catastrophic-recovery" class="md-nav__link">
    Pool Catastrophic Recovery
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/daos-stack/daos/edit/master/docs/admin/pool_operations.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="pool-operations">Pool Operations<a class="headerlink" href="#pool-operations" title="Permanent link">&para;</a></h1>
<p>A DAOS pool is a storage reservation that can span any storage nodes and
is managed by the administrator. The amount of space allocated to a pool
is decided at creation time and can eventually be expanded through the
management interface.</p>
<h2 id="pool-creationdestroy">Pool Creation/Destroy<a class="headerlink" href="#pool-creationdestroy" title="Permanent link">&para;</a></h2>
<p>A DAOS pool can be created and destroyed through the DAOS management API
(see daos_mgmt.h). DAOS also provides a utility called dmg to manage
storage pools from the command line.</p>
<p><strong>To create a pool:</strong></p>
<pre><code class="bash">$ dmg pool create --scm-size=xxG --nvme-size=yyT
</code></pre>

<p>This command creates a pool distributed across the DAOS servers with a
target size on each server with xxGB of SCM and yyTB of NVMe storage.
The actual space allocated will be a base-2 representation for SCM
(i.e. 20GB will be interpreted as 20GiB == <code>20*2^30</code> bytes) and base-10
representation for NVMe (i.e. 20GB will be interpreted as <code>20*10^9</code>
bytes) following convention of units for memory and storage capacity.
The UUID allocated to the newly created pool is printed to stdout
(referred as ${puuid}) as well as the rank where the pool service is
located (referred as ${svcl}).</p>
<pre><code class="bash">$ dmg pool create --help
...
[create command options]
      -g, --group=     DAOS pool to be owned by given group, format name@domain
      -u, --user=      DAOS pool to be owned by given user, format name@domain
      -a, --acl-file=  Access Control List file path for DAOS pool
      -s, --scm-size=  Size of SCM component of DAOS pool
      -n, --nvme-size= Size of NVMe component of DAOS pool
      -r, --ranks=     Storage server unique identifiers (ranks) for DAOS pool
      -v, --nsvc=      Number of pool service replicas (default: 1)
      -S, --sys=       DAOS system that pool is to be a part of (default: daos_server)
</code></pre>

<p>The typical output of this command is as follows:</p>
<pre><code class="bash">$ dmg -i pool create -s 1G -n 10G -g root -u root -S daos
Active connections: [localhost:10001]
Creating DAOS pool with 1GB SCM and 10GB NvMe storage (0.100 ratio)
Pool-create command SUCCEEDED: UUID: 5d6fa7bf-637f-4dba-bcd2-480ad251cdc7,
Service replicas: 0,1
</code></pre>

<p>This created a pool with UUID 5d6fa7bf-637f-4dba-bcd2-480ad251cdc7,
two pool service replica on rank 0 and 1.</p>
<p><strong>To destroy a pool:</strong></p>
<pre><code class="bash">$ dmg pool destroy --pool=${puuid}
</code></pre>

<p><strong>To see a list of the pools in your DAOS system:</strong></p>
<pre><code class="bash">$ dmg system list-pools
</code></pre>

<p>This will return a table of pool UUIDs and the ranks of their pool service
replicas. For example:</p>
<pre><code class="bash">$ dmg system list-pools
localhost:10001: connected
Pool UUID               Svc Replicas
---------               ------------
2a8ec3b2-729b-4617-bf51-77f37f764194    0,1
a106d667-5c5d-4d6f-ac3a-89099196c41a    0
85141a07-e3ba-42a6-81c2-3f18253c5e47    0
</code></pre>

<h2 id="pool-properties">Pool Properties<a class="headerlink" href="#pool-properties" title="Permanent link">&para;</a></h2>
<p>At creation time, a list of pool properties can be specified through the
API (not supported by the tool yet):</p>
<ul>
<li>
<p>DAOS_PROP_CO_LABEL is a string that the administrator can
    associate with a pool. e.g., project A, project B, IO500 test
    pool</p>
</li>
<li>
<p>DAOS_PROP_PO_ACL is the access control list (ACL) associated with
    the pool</p>
</li>
<li>
<p>DAOS_PROP_PO_SPACE_RB is the space to be reserved on each target
    for rebuild purpose.</p>
</li>
<li>
<p>DAOS_PROP_PO_SELF_HEAL defines whether the pool wants
    automatically-trigger, or manually-triggered self-healing.</p>
</li>
<li>
<p>DAOS_PROP_PO_RECLAIM is used to tune the space reclaim strategy
    based on time interval, batched commits or snapshot creation.</p>
</li>
</ul>
<p>While those pool properties are currently stored persistently with pool
metadata, many of them are still under development. Moreover, the
ability to modify some of those properties on an existing pool will also
be provided in a future release.</p>
<h2 id="pool-access-control-lists">Pool Access Control Lists<a class="headerlink" href="#pool-access-control-lists" title="Permanent link">&para;</a></h2>
<p>User and group access for pools is controlled by Access Control Lists (ACLs).
A DAOS ACL is a list of zero or more Access Control Entries (ACEs). ACEs are
the individual rules applied to each access decision.</p>
<p>If no ACL is provided when creating the pool, the default ACL grants read and
write access to the pool's owner-user and owner-group.</p>
<h3 id="access-control-entries">Access Control Entries<a class="headerlink" href="#access-control-entries" title="Permanent link">&para;</a></h3>
<p>ACEs are designated by a colon-separated string format:
<code>TYPE:FLAGS:IDENTITY:PERMISSIONS</code></p>
<p>Available values for these fields:</p>
<ul>
<li>TYPE: Allow (A)</li>
<li>FLAGS: Group (G)</li>
<li>IDENTITY: See below</li>
<li>PERMISSIONS: Read (r), Write (w)</li>
</ul>
<h4 id="identity">Identity<a class="headerlink" href="#identity" title="Permanent link">&para;</a></h4>
<p>The identity (also called the principal) is specified in the name@domain format.
The domain should be left off if the name is a user/group on the local domain.
Currently, this is the only case supported by DAOS.</p>
<p>There are three special identities, <code>OWNER@</code>, <code>GROUP@</code> and <code>EVERYONE@</code>,
which align with User, Group, and Other from traditional POSIX permission bits.
When providing them in the ACE string format, they must be spelled exactly as
written here, in uppercase with no domain appended.</p>
<h4 id="examples">Examples<a class="headerlink" href="#examples" title="Permanent link">&para;</a></h4>
<ul>
<li><code>A::daos_user@:rw</code></li>
<li>Allow the UNIX user named daos_user to have read-write access</li>
<li><code>A:G:project_users@:r</code></li>
<li>Allow anyone in the UNIX group project_users to have read-only access</li>
<li><code>A::EVERYONE@:r</code></li>
<li>Allow any user not covered by other rules to have read-only access</li>
</ul>
<h3 id="enforcement">Enforcement<a class="headerlink" href="#enforcement" title="Permanent link">&para;</a></h3>
<p>Access Control Entries (ACEs) will be enforced in the following order:</p>
<ul>
<li>Owner-User</li>
<li>Named users</li>
<li>Owner-Group and named groups</li>
<li>Everyone</li>
</ul>
<p>In general, enforcement will be based on the first match, ignoring
lower-priority entries. For example, if the user has an ACE for their user
identity, they will not receive the permissions for any of their groups, even if
those group entries have broader permissions than the user entry does. The user
is expected to match at most one user entry.</p>
<p>If no matching user entry is found, but entries match one or more of the user's
groups, enforcement will be based on the union of the permissions of all
matching groups.</p>
<p>By default, if a user matches no ACEs in the list, access will be denied.</p>
<h3 id="limitations">Limitations<a class="headerlink" href="#limitations" title="Permanent link">&para;</a></h3>
<p>The maximum length of the ACE list in a DAOS ACL structure is 64KiB.</p>
<p>To calculate the actual length of an ACL, use the following formula for each
ACE:</p>
<ul>
<li>The base size of an ACE is 256B.</li>
<li>If the ACE principal is <em>not</em> one of the special principals:</li>
<li>Add the length of the identity string + 1.</li>
<li>If that value is not 64B aligned, round up to the nearest 64B boundary.</li>
</ul>
<h3 id="creating-a-pool-with-a-custom-acl">Creating a pool with a custom ACL<a class="headerlink" href="#creating-a-pool-with-a-custom-acl" title="Permanent link">&para;</a></h3>
<p>To create a pool with a custom ACL:</p>
<pre><code class="bash">$ dmg pool create --scm-size &lt;size&gt; --acl-file &lt;path&gt;
</code></pre>

<p>The ACL file is expected to be a text file with one ACE listed on each line. For
example:</p>
<pre><code class="bash"># Entries:
A::OWNER@:rw
A:G:GROUP@:rw
# Everyone should be allowed to read
A::EVERYONE@:r
</code></pre>

<p>You may add comments to the ACL file by starting the line with <code>#</code>.</p>
<h3 id="displaying-a-pools-acl">Displaying a pool's ACL<a class="headerlink" href="#displaying-a-pools-acl" title="Permanent link">&para;</a></h3>
<p>To view a pool's ACL:</p>
<pre><code class="bash">$ dmg pool get-acl --pool &lt;UUID&gt;
</code></pre>

<p>The output is in the same string format used in the ACL file during creation,
with one ACE per line.</p>
<h3 id="modifying-a-pools-acl">Modifying a pool's ACL<a class="headerlink" href="#modifying-a-pools-acl" title="Permanent link">&para;</a></h3>
<p>For all of these commands using an ACL file, the ACL file must be in the format
noted above for pool creation.</p>
<h4 id="overwriting-the-acl">Overwriting the ACL<a class="headerlink" href="#overwriting-the-acl" title="Permanent link">&para;</a></h4>
<p>To replace a pool's ACL with a new ACL:</p>
<pre><code class="bash">$ dmg pool overwrite-acl --pool &lt;UUID&gt; --acl-file &lt;path&gt;
</code></pre>

<h4 id="updating-entries-in-an-existing-acl">Updating entries in an existing ACL<a class="headerlink" href="#updating-entries-in-an-existing-acl" title="Permanent link">&para;</a></h4>
<p>To add or update multiple entries in an existing pool ACL:</p>
<pre><code class="bash">$ dmg pool update-acl --pool &lt;UUID&gt; --acl-file &lt;path&gt;
</code></pre>

<p>To add or update a single entry in an existing pool ACL:</p>
<pre><code class="bash">$ dmg pool update-acl --pool &lt;UUID&gt; --entry &lt;ACE&gt;
</code></pre>

<p>If there is no existing entry for the principal in the ACL, the new entry is
added to the ACL. If there is already an entry for the principal, that entry
is replaced with the new one.</p>
<h4 id="removing-an-entry-from-the-acl">Removing an entry from the ACL<a class="headerlink" href="#removing-an-entry-from-the-acl" title="Permanent link">&para;</a></h4>
<p>To delete an entry for a given principal, or identity, in an existing pool ACL:</p>
<pre><code class="bash">$ dmg pool delete-acl --pool &lt;UUID&gt; --principal &lt;principal&gt;
</code></pre>

<p>The principal corresponds to the principal/identity portion of an ACE that was
set during pool creation or a previous pool ACL operation. For the delete
operation, the principal argument must be formatted as follows:</p>
<ul>
<li>Named user: <code>u:username@</code></li>
<li>Named group: <code>g:groupname@</code></li>
<li>Special principals:</li>
<li><code>OWNER@</code></li>
<li><code>GROUP@</code></li>
<li><code>EVERYONE@</code></li>
</ul>
<p>The entry for that principal will be completely removed. This does not always
mean that the principal will have no access. Rather, their access to the pool
will be decided based on the remaining ACL rules.</p>
<h2 id="pool-query">Pool Query<a class="headerlink" href="#pool-query" title="Permanent link">&para;</a></h2>
<p>The pool query operation retrieves information (i.e., the number of targets,
space usage, rebuild status, property list, and more) about a created pool. It
is integrated into the dmg_old utility.</p>
<p><strong>To query a pool:</strong></p>
<pre><code class="bash">$ dmg pool query --pool &lt;UUID&gt;
</code></pre>

<p>Below is the output for a pool created with SCM space only.</p>
<pre><code>pool=47293abe-aa6f-4147-97f6-42a9f796d64a
Pool 47293abe-aa6f-4147-97f6-42a9f796d64a, ntarget=64, disabled=8
Pool space info:
- Target(VOS) count:56
- SCM:
    Total size: 28GB
    Free: 28GB, min:505MB, max:512MB, mean:512MB
- NVMe:
    Total size: 0
    Free: 0, min:0, max:0, mean:0
Rebuild done, 10 objs, 1026 recs
</code></pre>
<p>The total and free sizes are the sum across all the targets whereas
min/max/mean gives information about individual targets. A min value
close to 0 means that one target is running out of space.</p>
<p>The example below shows a rebuild in progress and NVMe space allocated.</p>
<pre><code>pool=95886b8b-7eb8-454d-845c-fc0ae0ba5671
Pool 95886b8b-7eb8-454d-845c-fc0ae0ba5671, ntarget=64, disabled=8
Pool space info:
- Target(VOS) count:56
- SCM:
    Total size: 28GB
    Free: 28GB, min:470MB, max:512MB, mean:509MB
- NVMe:
    Total size: 56GB
    Free: 28GB, min:470MB, max:512MB, mean:509MB
Rebuild busy, 75 objs, 9722 recs
</code></pre>
<p>Additional status and telemetry data are planned to be exported through
the management API and tool and will be documented here once available.</p>
<h2 id="pool-modifications">Pool Modifications<a class="headerlink" href="#pool-modifications" title="Permanent link">&para;</a></h2>
<h3 id="target-exclusion-and-self-healing">Target Exclusion and Self-Healing<a class="headerlink" href="#target-exclusion-and-self-healing" title="Permanent link">&para;</a></h3>
<p><strong>To exclude a target from a pool:</strong></p>
<pre><code>$ dmg_old exclude --svc=${svcl} --pool=${puuid} --target=${rank}
</code></pre>

<h3 id="pool-extension">Pool Extension<a class="headerlink" href="#pool-extension" title="Permanent link">&para;</a></h3>
<h4 id="target-addition-space-rebalancing">Target Addition &amp; Space Rebalancing<a class="headerlink" href="#target-addition-space-rebalancing" title="Permanent link">&para;</a></h4>
<p>Support for online target addition and automatic space rebalancing is
planned for DAOS v1.4 and will be documented here once available.</p>
<h4 id="pool-shard-resize">Pool Shard Resize<a class="headerlink" href="#pool-shard-resize" title="Permanent link">&para;</a></h4>
<p>Support for quiescent pool shard resize is currently not supported and
is under consideration.</p>
<h2 id="pool-catastrophic-recovery">Pool Catastrophic Recovery<a class="headerlink" href="#pool-catastrophic-recovery" title="Permanent link">&para;</a></h2>
<p>A DAOS pool is instantiated on each target by a set of pmemobj files
managed by PMDK and SPDK blobs on SSDs. Tools to verify and repair this
persistent data is scheduled for DAOS v2.4 and will be documented here
once available.</p>
<p>Meanwhile, PMDK provides a recovery tool (i.e., pmempool check) to verify
and possibly repair a pmemobj file. As discussed in the previous section, the
rebuild status can be consulted via the pool query and will be expanded
with more information.</p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../administration/" title="System Administration" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                System Administration
              </span>
            </div>
          </a>
        
        
          <a href="../tiering_uns/" title="Tiering and Unified Namespace" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Tiering and Unified Namespace
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.c33a9706.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script>
      
    
  </body>
</html>