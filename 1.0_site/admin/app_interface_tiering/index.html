<!doctype html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Distributed Asynchronous Object Storage">
<link rel="canonical" href="http://daos.io/admin/app_interface_tiering/">
<meta name="author" content="DAOS Project">
<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="en">
<meta name="lang:search.pipeline.stopwords" content="True">
<meta name="lang:search.pipeline.trimmer" content="True">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">
<link rel="shortcut icon" href="../../assets/images/favicon.png">
<meta name="generator" content="mkdocs-1.1.2, mkdocs-material-4.6.3">
<title>Application Interface and Tiering - DAOS v.1.0</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
<link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
<meta name="theme-color" content="#546e7a">
<script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
<link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
<style>
body, input {
    font-family: "Ubuntu", "Helvetica Neue", Helvetica, Arial, sans-serif
}
code, kbd, pre {
    font-family: "Ubuntu Mono", "Courier New", Courier, monospace
}
</style>
<link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
<link href="../../../assets/stylesheets/bootstrap-4.4.1.css" rel="stylesheet" type="text/css">
<link href="../../../assets/stylesheets/styles_1.css" rel="stylesheet" type="text/css">
</head>

<body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue">
<svg class="md-svg">
  <defs>
    <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github">
      <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/>
    </svg>
  </defs>
</svg>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a href="#application-interface-and-tiering" tabindex="0" class="md-skip"> Skip to content </a>
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">      <div><img src="../../../assets/images/daos_logo_wh.png" width="86" height="61" alt=""/></div>
<div class="md-flex__cell md-flex__cell--shrink"> <a href="http://daos.io" title="DAOS v.1.0" aria-label="DAOS v.1.0" class="md-header-nav__button md-logo"> </a> </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"> <span class="md-header-nav__topic"> DAOS v.1.0 </span> <span class="md-header-nav__topic"> Application Interface and Tiering </span> </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        <div class="md-search" data-md-component="search" role="dialog">
          <label class="md-search__overlay" for="__search"></label>
          <div class="md-search__inner" role="search">
            <form class="md-search__form" name="search">
              <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
              <label class="md-icon md-search__icon" for="__search"></label>
              <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1"> &#xE5CD; </button>
            </form>
            <div class="md-search__output">
              <div class="md-search__scrollwrap" data-md-scrollfix>
                <div class="md-search-result" data-md-component="result">
                  <div class="md-search-result__meta"> Type to start searching </div>
                  <ol class="md-search-result__list">
                  </ol>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <div class="md-header-nav__source"> <a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-source="github">
          <div class="md-source__icon">
            <svg viewBox="0 0 24 24" width="24" height="24">
              <use xlink:href="#__github" width="24" height="24"></use>
            </svg>
          </div>
          <div class="md-source__repository"> daos-stack/daos </div>
          </a> </div>
      </div>
    </div>
  </nav>
</header>
<div class="md-container">
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
        <li class="md-tabs__item"> <a href="../.." class="md-tabs__link md-tabs__link--active"> Home </a> </li>
        <li class="md-tabs__item"> <a href="../../overview/terminology/" class="md-tabs__link"> Architecture Overview </a> </li>
        <li class="md-tabs__item"> <a href="../hardware/" class="md-tabs__link"> Administration Guide </a> </li>
        <li class="md-tabs__item"> <a href="../../user/container.md" class="md-tabs__link"> User Guide </a> </li>
        <li class="md-tabs__item"> <a href="../../release/release_notes_v1_0.md" class="md-tabs__link"> Releases </a> </li>
        <li class="md-tabs__item"> <a href="../../dev/development.md" class="md-tabs__link"> Developer Zone </a> </li>
      </ul>
    </div>
  </nav>
	 <section>
	  <div class="dropdown show"> <a class="btn btn-sm dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> Select Version </a>
	    <div class="dropdown-menu">
	      <a class="dropdown-item" href="../index.html">v.Dev</a> <a class="dropdown-item" href="../1.2_site/index.html" >v1.2</a> <a class="dropdown-item disabled" href="../1.0_site/index.html">v1.0</a>
	      </div>
      </div>
	</section>
  <main class="md-main" role="main">
    <div class="md-main__inner md-grid" data-md-component="container">
      <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <nav class="md-nav md-nav--primary" data-md-level="0">
              <label class="md-nav__title md-nav__title--site" for="__drawer"> <a href="http://daos.io" title="DAOS v.1.0" class="md-nav__button md-logo"> </a> DAOS v.1.0 </label>
              <div class="md-nav__source"> <a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-source="github">
                <div class="md-source__icon">
                  <svg viewBox="0 0 24 24" width="24" height="24">
                    <use xlink:href="#__github" width="24" height="24"></use>
                  </svg>
                </div>
                <div class="md-source__repository"> daos-stack/daos </div>
                </a> </div>
              <ul class="md-nav__list" data-md-scrollfix>
                <li class="md-nav__item"> <a href="../.." title="Home" class="md-nav__link"> Home </a> </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
                  <label class="md-nav__link" for="nav-2"> Architecture Overview </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-2"> Architecture Overview </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../overview/terminology/" title="Terminology" class="md-nav__link"> Terminology </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/architecture.md" title="Architecture" class="md-nav__link"> Architecture </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/storage/" title="Storage Model" class="md-nav__link"> Storage Model </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/transaction/" title="Transaction Model" class="md-nav__link"> Transaction Model </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/fault/" title="Fault Model" class="md-nav__link"> Fault Model </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/security/" title="Security Model" class="md-nav__link"> Security Model </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
                  <label class="md-nav__link" for="nav-3"> Administration Guide </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-3"> Administration Guide </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../hardware/" title="Hardware Requirements" class="md-nav__link"> Hardware Requirements </a> </li>
                      <li class="md-nav__item"> <a href="../installation/" title="Software Installation" class="md-nav__link"> Software Installation </a> </li>
                      <li class="md-nav__item"> <a href="../predeployment_check.md" title="Pre-deployment Checklist" class="md-nav__link"> Pre-deployment Checklist </a> </li>
                      <li class="md-nav__item"> <a href="../deployment/" title="System Deployment" class="md-nav__link"> System Deployment </a> </li>
                      <li class="md-nav__item"> <a href="../administration/" title="System Administration" class="md-nav__link"> System Administration </a> </li>
                      <li class="md-nav__item"> <a href="../pool_operations/" title="Pool Operations" class="md-nav__link"> Pool Operations </a> </li>
                      <li class="md-nav__item"> <a href="../tiering_uns.md" title="Tiering and Unified Namespace" class="md-nav__link"> Tiering and Unified Namespace </a> </li>
                      <li class="md-nav__item"> <a href="../performance_tuning/" title="Performance Tuning" class="md-nav__link"> Performance Tuning </a> </li>
                      <li class="md-nav__item"> <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link"> Troubleshooting </a> </li>
                      <li class="md-nav__item"> <a href="../utilities_examples/" title="Utilities and Usage Examples" class="md-nav__link"> Utilities and Usage Examples </a> </li>
                      <li class="md-nav__item"> <a href="../env_variables/" title="Environment Variables" class="md-nav__link"> Environment Variables </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
                  <label class="md-nav__link" for="nav-4"> User Guide </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-4"> User Guide </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../user/container.md" title="Container Management" class="md-nav__link"> Container Management </a> </li>
                      <li class="md-nav__item"> <a href="../../user/interface.md" title="Native Programming Interface" class="md-nav__link"> Native Programming Interface </a> </li>
                      <li class="md-nav__item"> <a href="../../user/posix.md" title="POSIX Namespace" class="md-nav__link"> POSIX Namespace </a> </li>
                      <li class="md-nav__item"> <a href="../../user/mpi-io.md" title="MPI-IO Support" class="md-nav__link"> MPI-IO Support </a> </li>
                      <li class="md-nav__item"> <a href="../../user/hdf5.md" title="HDF5 Support" class="md-nav__link"> HDF5 Support </a> </li>
                      <li class="md-nav__item"> <a href="../../user/spark.md" title="Spark and Hadoop" class="md-nav__link"> Spark and Hadoop </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
                  <label class="md-nav__link" for="nav-5"> Releases </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-5"> Releases </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../release/release_notes_v1_0.md" title="Release Notes v1.0" class="md-nav__link"> Release Notes v1.0 </a> </li>
                      <li class="md-nav__item"> <a href="../../release/support_matrix.md" title="Support Matrix" class="md-nav__link"> Support Matrix </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
                  <label class="md-nav__link" for="nav-6"> Developer Zone </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-6"> Developer Zone </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../dev/development.md" title="Dev Environment" class="md-nav__link"> Dev Environment </a> </li>
                      <li class="md-nav__item"> <a href="../../dev/contributing.md" title="Contributing" class="md-nav__link"> Contributing </a> </li>
                      <li class="md-nav__item"> <a href="https://github.com/daos-stack/daos/blob/master/src/README.md" title="DAOS Internals" class="md-nav__link"> DAOS Internals </a> </li>
                      <li class="md-nav__item"> <a href="../../html/" title="DAOS API Documentation" class="md-nav__link"> DAOS API Documentation </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="https://wiki.hpdd.intel.com" title="Community Wiki" class="md-nav__link"> Community Wiki </a> </li>
                <li class="md-nav__item"> <a href="https://wiki.hpdd.intel.com/display/DC/Roadmap/" title="Roadmap" class="md-nav__link"> Roadmap </a> </li>
                <li class="md-nav__item"> <a href="https://daos.groups.io/g/daos" title="Mailing list" class="md-nav__link"> Mailing list </a> </li>
                <li class="md-nav__item"> <a href="https://jira.hpdd.intel.com/projects/DAOS" title="Issue tracker" class="md-nav__link"> Issue tracker </a> </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <nav class="md-nav md-nav--secondary">
              <label class="md-nav__title" for="__toc">Table of contents</label>
              <ul class="md-nav__list" data-md-scrollfix>
                <li class="md-nav__item"> <a href="#daos-container-management" class="md-nav__link"> DAOS Container Management </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#container-creationdestroy" class="md-nav__link"> Container Creation/Destroy </a> </li>
                      <li class="md-nav__item"> <a href="#container-properties" class="md-nav__link"> Container Properties </a> </li>
                      <li class="md-nav__item"> <a href="#container-snapshot" class="md-nav__link"> Container Snapshot </a> </li>
                      <li class="md-nav__item"> <a href="#container-user-attributes" class="md-nav__link"> Container User Attributes </a> </li>
                      <li class="md-nav__item"> <a href="#container-acls" class="md-nav__link"> Container ACLs </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="#native-programming-interface" class="md-nav__link"> Native Programming Interface </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#building-against-the-daos-library" class="md-nav__link"> Building against the DAOS library </a> </li>
                      <li class="md-nav__item"> <a href="#daos-api-reference" class="md-nav__link"> DAOS API Reference </a> </li>
                      <li class="md-nav__item"> <a href="#bindings-to-different-languages" class="md-nav__link"> Bindings to Different Languages </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="#posix-filesystem" class="md-nav__link"> POSIX Filesystem </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#libdfs" class="md-nav__link"> libdfs </a> </li>
                      <li class="md-nav__item"> <a href="#dfuse" class="md-nav__link"> dfuse </a> </li>
                      <li class="md-nav__item"> <a href="#libioil" class="md-nav__link"> libioil </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="#unified-namespace" class="md-nav__link"> Unified Namespace </a> </li>
                <li class="md-nav__item"> <a href="#hpc-io-middleware-support" class="md-nav__link"> HPC I/O Middleware Support </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#mpi-io" class="md-nav__link"> MPI-IO </a> </li>
                      <li class="md-nav__item"> <a href="#hdf5" class="md-nav__link"> HDF5 </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="#spark-support" class="md-nav__link"> Spark Support </a> </li>
                <li class="md-nav__item"> <a href="#data-migration" class="md-nav__link"> Data Migration </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#migration-tofrom-a-posix-filesystem" class="md-nav__link"> Migration to/from a POSIX filesystem </a> </li>
                      <li class="md-nav__item"> <a href="#container-parking" class="md-nav__link"> Container Parking </a> </li>
                    </ul>
                  </nav>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <div class="md-content">
        <article class="md-content__inner md-typeset"> <a href="https://github.com/daos-stack/daos/edit/master/docs/admin/app_interface_tiering.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
          <h1 id="application-interface-and-tiering">Application Interface and Tiering<a class="headerlink" href="#application-interface-and-tiering" title="Permanent link">&para;</a></h1>
          <h2 id="daos-container-management">DAOS Container Management<a class="headerlink" href="#daos-container-management" title="Permanent link">&para;</a></h2>
          <p>DAOS containers are the unit of data management for users.</p>
          <h3 id="container-creationdestroy">Container Creation/Destroy<a class="headerlink" href="#container-creationdestroy" title="Permanent link">&para;</a></h3>
          <p>Containers can be created and destroyed through the daos_cont_create/destroy()
            functions exported by the DAOS API. A user tool called <code>daos</code> is also
            provided to manage containers.</p>
          <p>To create a container:</p>
          <pre><code>$ daos container create --pool=a171434a-05a5-4671-8fe2-615aa0d05094 --svc=0
Successfully created container 008123fc-6b6c-4768-a88a-a2a5ef34a1a2
</code></pre>
          <p>The container type (i.e., POSIX or HDF5) can be passed via the --type option.
            As shown below, the pool UUID, container UUID, and container attributes can be
            stored in the extended attributes of a POSIX file or directory for convenience.
            Then subsequent invocations of the daos tools need to reference the path
            to the POSIX file or directory.</p>
          <pre><code>$ daos container create --pool=a171434a-05a5-4671-8fe2-615aa0d05094 --svc=0 --path=/tmp/mycontainer --type=POSIX --oclass=large --chunk_size=4K
Successfully created container 419b7562-5bb8-453f-bd52-917c8f5d80d1 type POSIX
$ daos container query --svc=0 --path=/tmp/mycontainer
Pool UUID:      a171434a-05a5-4671-8fe2-615aa0d05094
Container UUID: 419b7562-5bb8-453f-bd52-917c8f5d80d1
Number of snapshots: 0
Latest Persistent Snapshot: 0
DAOS Unified Namespace Attributes on path /tmp/mycontainer:
Container Type: POSIX
Object Class:   large
Chunk Size:     4096
</code></pre>
          <h3 id="container-properties">Container Properties<a class="headerlink" href="#container-properties" title="Permanent link">&para;</a></h3>
          <p>At creation time, a list of container properties can be specified:</p>
          <ul>
            <li>
              <p>DAOS_PROP_CO_LABEL is a string that a user can associate with a
                container. e.g., "Cat Pics" or "ResNet-50 training data"</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_LAYOUT_TYPE is the container type (POSIX, MPI-IO,
                HDF5, ...)</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_LAYOUT_VER is a version of the layout that can be
                used by I/O middleware and application to handle interoperability.</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_CSUM defines whether checksums are enabled or
                disabled and the checksum type used.</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_REDUN_FAC is the redundancy factor that drives the
                minimal data protection required for objects stored in the
                container. e.g., RF1 means no data protection, RF3 only allows 3-way
                replication or erasure code N+2.</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_REDUN_LVL is the fault domain level that should be
                used to place data redundancy information (e.g., storage nodes, racks
                ...). This information will be eventually consumed to determine object
                placement.</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_SNAPSHOT_MAX is the maximum number of snapshots to
                retain. When a new snapshot is taken, and the threshold is reached,
                the oldest snapshot will be automatically deleted.</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_ACL is the list of ACL for the container.</p>
            </li>
            <li>
              <p>DAOS_PROP_CO_COMPRESS and DAOS_PROP_CO_ENCRYPT are reserved for configuring
                respectively compression and encryption. These features
                are currently not on the roadmap.</p>
            </li>
          </ul>
          <p>While those properties are currently stored persistently with container
            metadata, many of them are still under development. The ability to modify some
            of these properties on an existing container will also be provided in a future release.</p>
          <h3 id="container-snapshot">Container Snapshot<a class="headerlink" href="#container-snapshot" title="Permanent link">&para;</a></h3>
          <p>Similar to container create/destroy, a container can be snapshotted through the
            DAOS API by calling daos_cont_create_snap(). Additional functions are provided
            to destroy and list container snapshots.</p>
          <p>The API also provides the ability to subscribe to container snapshot events and
            to rollback the content of a container to a previous snapshot, but those
            operations are not yet fully implemented.</p>
          <p>This section will be updated once support for container snapshot is supported by
            the <code>daos</code> tool.</p>
          <h3 id="container-user-attributes">Container User Attributes<a class="headerlink" href="#container-user-attributes" title="Permanent link">&para;</a></h3>
          <p>Similar to POSIX extended attributes, users can attach some metadata to each
            container through the daos_cont_{list/get/set}_attr() API.</p>
          <h3 id="container-acls">Container ACLs<a class="headerlink" href="#container-acls" title="Permanent link">&para;</a></h3>
          <p>Support for per-container ACLs is scheduled for DAOS v1.2. Similar to pool ACLs,
            container ACLs will implement a subset of the NFSv4 ACL standard. This feature
            will be documented here once available.</p>
          <h2 id="native-programming-interface">Native Programming Interface<a class="headerlink" href="#native-programming-interface" title="Permanent link">&para;</a></h2>
          <h3 id="building-against-the-daos-library">Building against the DAOS library<a class="headerlink" href="#building-against-the-daos-library" title="Permanent link">&para;</a></h3>
          <p>To build application or I/O middleware against the native DAOS API, include
            the daos.h header file in your program and link with -Ldaos. Examples are
            available under src/tests.</p>
          <h3 id="daos-api-reference">DAOS API Reference<a class="headerlink" href="#daos-api-reference" title="Permanent link">&para;</a></h3>
          <p>libdaos is written in C and uses Doxygen comments that are added to C header
            files.</p>
          <p>[TODO] Generate Doxygen document and add a link here.</p>
          <h3 id="bindings-to-different-languages">Bindings to Different Languages<a class="headerlink" href="#bindings-to-different-languages" title="Permanent link">&para;</a></h3>
          <p>API bindings to both Python<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> and Go<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> languages are available.</p>
          <h2 id="posix-filesystem">POSIX Filesystem<a class="headerlink" href="#posix-filesystem" title="Permanent link">&para;</a></h2>
          <p>A regular POSIX namespace can be encapsulated into a DAOS container.  This
            capability is provided by the libdfs library that implements the file and
            directory abstractions over the native libdaos library. The POSIX emulation can
            be exposed to applications or I/O frameworks either directly (e.g., for
            frameworks Spark or TensorFlow, or benchmark like IOR or mdtest that support
            different a storage backend plugin), or transparently via a FUSE daemon, combined
            optionally with an interception library to address some of the FUSE performance
            bottleneck by delivering full OS bypass for POSIX read/write operations.</p>
          <h3 id="libdfs">libdfs<a class="headerlink" href="#libdfs" title="Permanent link">&para;</a></h3>
          <p>DFS stands for DAOS File System and is a library that allows a DAOS container to
            be accessed as a hierarchical POSIX namespace. It supports files, directories,
            and symbolic links, but not hard links. Access permissions are inherited from
            the parent pool and not implemented on a per-file or per-directory basis.
            setuid() and setgid() programs, as well as supplementary groups, are currently not
            supported.</p>
          <p>While libdfs can be tested from a single instance (i.e. single process or client
            node if used through dfuse), special care is required when the same POSIX
            container is mounted concurrently by multiple processes. Concurrent DFS mounts
            are not recommended. Support for concurrency control is under development and
            will be documented here once ready.</p>
          <h3 id="dfuse">dfuse<a class="headerlink" href="#dfuse" title="Permanent link">&para;</a></h3>
          <p>A fuse daemon called dfuse is provided to mount a POSIX container in the local
            filesystem tree. dfuse exposes one mountpoint as a single DFS namespace with a
            single pool and container and can be mounted by regular use (provided that it
            is granted access to the pool and container).
            To mount an existing POSIX container with dfuse, run the following command:</p>
          <pre><code>$ dfuse --pool a171434a-05a5-4671-8fe2-615aa0d05094 -s 0 --container 464e68ca-0a30-4a5f-8829-238e890899d2 -m /tmp/daos
</code></pre>
          <p>The UUID after -p and -c should be replaced with respectively the pool and
            container UUID. -s should be followed by the pool svc rank list and -m is the
            local directory where the mount point will be setup.
            When done, the file system can be unmounted via fusermount:</p>
          <pre><code>$ fusermount3 -u /tmp/daos
</code></pre>
          <h3 id="libioil">libioil<a class="headerlink" href="#libioil" title="Permanent link">&para;</a></h3>
          <p>An interception library called libioil is available to work with dfuse. This
            library works in conjunction with dfuse and allow to interception of POSIX I/O
            calls and issue the I/O operations directly from the application context through
            libdaos without any appliction changes.  This provides kernel-bypass for I/O data
            leading to improved performance.
            To use this set the LD_PRELOAD to point to the shared libray in the DOAS install
            dir</p>
          <p>LD_PRELOAD=/path/to/daos/install/lib/libioil.so</p>
          <p>Support for libioil is currently planned for DAOS v1.2.</p>
          <h2 id="unified-namespace">Unified Namespace<a class="headerlink" href="#unified-namespace" title="Permanent link">&para;</a></h2>
          <p>The DAOS tier can be tightly integrated with the Lustre parallel filesystem in
            which DAOS containers will be represented through the Lustre namespace. This
            capability is under development and is scheduled for DAOS v1.2.</p>
          <p>Current state of work can be summarized as follow :</p>
          <ul>
            <li>
              <p>DAOS integration with Lustre uses the Lustre foreign file/dir feature
                (from LU-11376 and associated patches)</p>
            </li>
            <li>
              <p>each time a DAOS POSIX container is created, using <code>daos</code> utility and its
                '--path' UNS option, a Lustre foreign file/dir of 'daos' type is being
                created with a specific LOV/LMV EA content that will allow to store the
                DAOS pool and containers UUIDs. </p>
            </li>
            <li>
              <p>Lustre Client patch for LU-12682, adds DAOS specific support to the Lustre
                foreign file/dir feature. It allows for foreign file/dir of <code>daos</code> type
                to be presented and act as <code>&lt;absolute-prefix&gt;/&lt;pool-uuid&gt;/&lt;container-uuid&gt;</code> a symlink to the Linux Kernel/VFS.</p>
            </li>
            <li>
              <p>the
                <absolute-prefix>
                can be specified as the new <code>daos=&lt;absolute-prefix&gt;</code> Lustre Client mount option, or also thru the new <code>llite.*.daos_prefix</code> Lustre dynamic tuneable. And both
                <pool-uuid>
                and
                <container-uuid>
                are
                extracted from foreign file/dir LOV/LMV EA.</p>
            </li>
            <li>
              <p>to allow for symlink resolution and transparent access to DAOS concerned
                container content, it is expected that a DFuse/DFS instance/mount, of
                DAOS Server root, exists on
                <absolute-prefix>
                presenting all served
                pools/containers as <code>&lt;pool-uuid&gt;/&lt;container-uuid&gt;</code> relative paths.</p>
            </li>
            <li>
              <p><code>daos</code> foreign support is enabled at mount time with <code>daos=</code> option
                present, or dynamically thru <code>llite.*.daos_enable</code> setting.</p>
            </li>
          </ul>
          <h2 id="hpc-io-middleware-support">HPC I/O Middleware Support<a class="headerlink" href="#hpc-io-middleware-support" title="Permanent link">&para;</a></h2>
          <p>Several HPC I/O middleware libraries have been ported to the native API.</p>
          <h3 id="mpi-io">MPI-IO<a class="headerlink" href="#mpi-io" title="Permanent link">&para;</a></h3>
          <p>DAOS has its own MPI-IO ROM ADIO driver located in a MPICH fork on GitHub:</p>
          <p><a href="https://github.com/daos-stack/mpich">https://github.com/daos-stack/mpich</a></p>
          <p>This driver has been submitted upstream for integration.</p>
          <p>To build the MPI-IO driver:</p>
          <ul>
            <li>
              <p>export MPI_LIB=""</p>
            </li>
            <li>
              <p>download the mpich repo from above and switch to daos_adio branch</p>
            </li>
            <li>
              <p>./autogen.sh</p>
            </li>
            <li>
              <p>mkdir build; cd build</p>
            </li>
            <li>
              <p>../configure --prefix=dir --enable-fortran=all --enable-romio
                --enable-cxx --enable-g=all --enable-debuginfo
                --with-file-system=ufs+daos --with-daos=dir --with-cart=dir</p>
            </li>
            <li>
              <p>make -j8; make install</p>
            </li>
          </ul>
          <p>Switch the PATH and LD_LIBRARY_PATH to where you want to build your client apps or libs
            that use MPI to the installed MPICH.</p>
          <p>Build any client (HDF5, ior, mpi test suites) normally with the mpicc and mpich
            library installed above (see child pages).</p>
          <p>To run an example:</p>
          <ol>
            <li>Launch DAOS server(s) and create a pool as specified in the previous section.
              This will return a pool uuid "puuid" and service rank list "svcl"</li>
            <li>At the client side, the following environment variables need to be set:
              <pre><code>export PATH=/path/to/mpich/install/bin:$PATH
export LD_LIBRARY_PATH=/path/to/mpich/install/lib:$LD_LIBRARY_PATH
export MPI_LIB=""
export CRT_ATTACH_INFO_PATH=/path/ (whatever was passed to daos_server start -a)
export DAOS_SINGLETON_CLI=1
</code></pre>
              <ol>
                <li>export DAOS_POOL=puuid; export DAOS_SVCL=svcl
                  This is just temporary till we have a better way of passing pool
                  connect info to MPI-IO and other middleware over DAOS.</li>
                <li>Run the client application or test.</li>
              </ol>
            </li>
          </ol>
          <p>Limitations to the current implementation include:</p>
          <ul>
            <li>
              <p>Incorrect MPI_File_set_size and MPI_File_get_size - This will be fixed in
                the future when DAOS correctly supports records enumeration after punch or
                key query for max/min key and recx.</p>
            </li>
            <li>
              <p>Reading Holes does not return 0, but leaves the buffer untouched</p>
            </li>
            <li>
              <p>No support for MPI file atomicity, preallocate, shared file pointers.</p>
            </li>
          </ul>
          <h3 id="hdf5">HDF5<a class="headerlink" href="#hdf5" title="Permanent link">&para;</a></h3>
          <p>A prototype version of an HDF5 DAOS connector is available. Please refer to the
            DAOS VOL connector user guide<sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup> for instructions on how to build and use it.</p>
          <h2 id="spark-support">Spark Support<a class="headerlink" href="#spark-support" title="Permanent link">&para;</a></h2>
          <p>Spark integration with libdfs is under development and is scheduled for DAOS
            v1.0 or v1.2.</p>
          <h2 id="data-migration">Data Migration<a class="headerlink" href="#data-migration" title="Permanent link">&para;</a></h2>
          <h3 id="migration-tofrom-a-posix-filesystem">Migration to/from a POSIX filesystem<a class="headerlink" href="#migration-tofrom-a-posix-filesystem" title="Permanent link">&para;</a></h3>
          <p>A dataset mover tool is under consideration to move a snapshot of a POSIX,
            MPI-IO or HDF5 container to a POSIX filesystem and vice versa. The copy will be
            performed at the POSIX or HDF5 level. The resulting HDF5 file over the POSIX
            filesystem will be accessible through the native HDF5 connector with the POSIX
            VFD.</p>
          <p>The first version of the mover tool is currently scheduled for DAOS v1.4.</p>
          <h3 id="container-parking">Container Parking<a class="headerlink" href="#container-parking" title="Permanent link">&para;</a></h3>
          <p>The mover tool will also eventually support the ability to serialize and
            deserialize a DAOS container to a set of POSIX files that can be stored or
            "parked" in an external POSIX filesystem. This transformation is agnostic to the
            data model and container type and will retain all DAOS internal metadata.</p>
          <div class="footnote">
            <hr />
            <ol>
              <li id="fn:1">
                <p>https://github.com/daos-stack/daos/blob/master/src/client/pydaos/raw/README.md&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
              </li>
              <li id="fn:2">
                <p>https://godoc.org/github.com/daos-stack/go-daos/pkg/daos&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
              </li>
              <li id="fn:3">
                <p>https://bitbucket.hdfgroup.org/projects/HDF5VOL/repos/daos-vol/browse/README.md&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
              </li>
            </ol>
          </div>
        </article>
      </div>
    </div>
  </main>
  <footer class="md-footer">
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright"> powered by <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs</a> </div>
      </div>
    </div>
  </footer>
</div>
<script src="../../../assets/javascripts/application.c33a9706.js"></script>
<script src="../../../js/jquery-3.4.1.min.js"></script>
<script src="../../../js/popper.min.js"></script>
<script src="../../../js/bootstrap-4.4.1.js"></script>
<script>app.initialize({version:"1.1.2",url:{base:"."}})</script>
</body>
</html>