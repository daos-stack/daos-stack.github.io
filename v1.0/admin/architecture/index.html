<!doctype html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="Distributed Asynchronous Object Storage">
<link rel="canonical" href="http://daos.io/admin/architecture/">
<meta name="author" content="DAOS Project">
<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.language" content="en">
<meta name="lang:search.pipeline.stopwords" content="True">
<meta name="lang:search.pipeline.trimmer" content="True">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.tokenizer" content="[\s\-]+">
<link rel="shortcut icon" href="../../assets/images/favicon.png">
<meta name="generator" content="mkdocs-1.1.2, mkdocs-material-4.6.3">
<title>DAOS Architecture - DAOS v.1.0</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.adb8469c.css">
<link rel="stylesheet" href="../../assets/stylesheets/application-palette.a8b3c06d.css">
<meta name="theme-color" content="#546e7a">
<script src="../../assets/javascripts/modernizr.86422ebf.js"></script>
<link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,400i,700%7CUbuntu+Mono&display=fallback">
<style>
body, input {
    font-family: "Ubuntu", "Helvetica Neue", Helvetica, Arial, sans-serif
}
code, kbd, pre {
    font-family: "Ubuntu Mono", "Courier New", Courier, monospace
}
</style>
<link rel="stylesheet" href="../../assets/fonts/material-icons.css">
<link href="../../css/bootstrap-4.4.1.css" rel="stylesheet" type="text/css">
<link href="../../assets/stylesheets/styles_1.css" rel="stylesheet" type="text/css">
</head>

<body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="blue">
<svg class="md-svg">
  <defs>
    <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github">
      <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/>
    </svg>
  </defs>
</svg>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a href="#daos-architecture" tabindex="0" class="md-skip"> Skip to content </a>
<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex"> <img src="../../assets/images/daos_logo_wh.png" width="80" height="61" alt=""/>
    <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
    </div>
    <div class="md-flex__cell md-flex__cell--stretch">
      <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"> <span class="md-header-nav__topic"> DAOS v.1.0 </span> <span class="md-header-nav__topic"> DAOS Architecture </span> </div>
    </div>
    <div class="md-flex__cell md-flex__cell--shrink">
      <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
      <div class="md-search" data-md-component="search" role="dialog">
        <label class="md-search__overlay" for="__search"></label>
        <div class="md-search__inner" role="search">
          <form class="md-search__form" name="search">
            <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
            <label class="md-icon md-search__icon" for="__search"></label>
            <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1"> &#xE5CD; </button>
          </form>
          <div class="md-search__output">
            <div class="md-search__scrollwrap" data-md-scrollfix>
              <div class="md-search-result" data-md-component="result">
                <div class="md-search-result__meta"> Type to start searching </div>
                <ol class="md-search-result__list">
                </ol>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="md-flex__cell md-flex__cell--shrink">
      <div class="md-header-nav__source"> <a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-source="github">
        <div class="md-source__icon">
          <svg viewBox="0 0 24 24" width="24" height="24">
            <use xlink:href="#__github" width="24" height="24"></use>
          </svg>
        </div>
        <div class="md-source__repository"> daos-stack/daos </div>
        </a> </div>
    </div>
    </div>
  </nav>
</header>
<div class="md-container">
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
        <li class="md-tabs__item"> <a href="../.." class="md-tabs__link"> Home </a> </li>
        <li class="md-tabs__item"> <a href="../../overview/terminology/index.html" class="md-tabs__link"> Architecture Overview </a> </li>
        <li class="md-tabs__item"> <a href="../hardware/index.html" class="md-tabs__link md-tabs__link--active"> Administration Guide </a> </li>
        <li class="md-tabs__item"> <a href="../../user/container/index.html" class="md-tabs__link"> User Guide </a> </li>
        <li class="md-tabs__item"> <a href="../../release/index.html" class="md-tabs__link"> Releases </a> </li>
        <li class="md-tabs__item"> <a href="../../development/index.html" class="md-tabs__link"> Developer Zone </a> </li>
      </ul>
    </div>
  </nav>
  <section>
    <div class="dropdown show">
      <div class="dropdown show col-xl-12"> <a class="btn btn-sm dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> DAOS Version</a>
        <div class="dropdown-menu"> <a class="dropdown-header">Select Version</a> <a class="dropdown-item" href="../../../devbranch/index.html">Dev Branch</a> <a class="dropdown-item" href="../../../index.html">1.2</a><a class="dropdown-item disabled" href="v1.0/index.html">1.0</a> </div>
      </div>
    </div>
  </section>
  <main class="md-main" role="main">
    <div class="md-main__inner md-grid" data-md-component="container">
      <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <nav class="md-nav md-nav--primary" data-md-level="0">
              <label class="md-nav__title md-nav__title--site" for="__drawer"> <a href="http://daos.io" title="DAOS v.1.0" class="md-nav__button md-logo"> <i class="md-icon"></i> </a> DAOS v.1.0 </label>
              <div class="md-nav__source"> <a href="https://github.com/daos-stack/daos/" title="Go to repository" class="md-source" data-md-source="github">
                <div class="md-source__icon">
                  <svg viewBox="0 0 24 24" width="24" height="24">
                    <use xlink:href="#__github" width="24" height="24"></use>
                  </svg>
                </div>
                <div class="md-source__repository"> daos-stack/daos </div>
                </a> </div>
              <ul class="md-nav__list" data-md-scrollfix>
                <li class="md-nav__item"> <a href="../.." title="Home" class="md-nav__link"> Home </a> </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
                  <label class="md-nav__link" for="nav-2"> Architecture Overview </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-2"> Architecture Overview </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../overview/terminology/" title="Terminology" class="md-nav__link"> Terminology </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/architecture.md" title="Architecture" class="md-nav__link"> Architecture </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/storage/" title="Storage Model" class="md-nav__link"> Storage Model </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/transaction/" title="Transaction Model" class="md-nav__link"> Transaction Model </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/fault/" title="Fault Model" class="md-nav__link"> Fault Model </a> </li>
                      <li class="md-nav__item"> <a href="../../overview/security/" title="Security Model" class="md-nav__link"> Security Model </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
                  <label class="md-nav__link" for="nav-3"> Administration Guide </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-3"> Administration Guide </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../hardware/" title="Hardware Requirements" class="md-nav__link"> Hardware Requirements </a> </li>
                      <li class="md-nav__item"> <a href="../installation/" title="Software Installation" class="md-nav__link"> Software Installation </a> </li>
                      <li class="md-nav__item"> <a href="../predeployment_check.md" title="Pre-deployment Checklist" class="md-nav__link"> Pre-deployment Checklist </a> </li>
                      <li class="md-nav__item"> <a href="../deployment/" title="System Deployment" class="md-nav__link"> System Deployment </a> </li>
                      <li class="md-nav__item"> <a href="../administration/" title="System Administration" class="md-nav__link"> System Administration </a> </li>
                      <li class="md-nav__item"> <a href="../pool_operations/" title="Pool Operations" class="md-nav__link"> Pool Operations </a> </li>
                      <li class="md-nav__item"> <a href="../tiering_uns.md" title="Tiering and Unified Namespace" class="md-nav__link"> Tiering and Unified Namespace </a> </li>
                      <li class="md-nav__item"> <a href="../performance_tuning/" title="Performance Tuning" class="md-nav__link"> Performance Tuning </a> </li>
                      <li class="md-nav__item"> <a href="../troubleshooting/" title="Troubleshooting" class="md-nav__link"> Troubleshooting </a> </li>
                      <li class="md-nav__item"> <a href="../utilities_examples/" title="Utilities and Usage Examples" class="md-nav__link"> Utilities and Usage Examples </a> </li>
                      <li class="md-nav__item"> <a href="../env_variables/" title="Environment Variables" class="md-nav__link"> Environment Variables </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
                  <label class="md-nav__link" for="nav-4"> User Guide </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-4"> User Guide </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../user/container.md" title="Container Management" class="md-nav__link"> Container Management </a> </li>
                      <li class="md-nav__item"> <a href="../../user/interface.md" title="Native Programming Interface" class="md-nav__link"> Native Programming Interface </a> </li>
                      <li class="md-nav__item"> <a href="../../user/posix.md" title="POSIX Namespace" class="md-nav__link"> POSIX Namespace </a> </li>
                      <li class="md-nav__item"> <a href="../../user/mpi-io.md" title="MPI-IO Support" class="md-nav__link"> MPI-IO Support </a> </li>
                      <li class="md-nav__item"> <a href="../../user/hdf5.md" title="HDF5 Support" class="md-nav__link"> HDF5 Support </a> </li>
                      <li class="md-nav__item"> <a href="../../user/spark.md" title="Spark and Hadoop" class="md-nav__link"> Spark and Hadoop </a> </li>
                      <li class="md-nav__item"> <a href="../../user/datamover.md" title="Data Mover" class="md-nav__link"> Data Mover </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
                  <label class="md-nav__link" for="nav-5"> Releases </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-5"> Releases </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../release/release_notes_v1_0.md" title="Release Notes v1.0" class="md-nav__link"> Release Notes v1.0 </a> </li>
                      <li class="md-nav__item"> <a href="../../release/support_matrix.md" title="Support Matrix" class="md-nav__link"> Support Matrix </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item md-nav__item--nested">
                  <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
                  <label class="md-nav__link" for="nav-6"> Developer Zone </label>
                  <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
                    <label class="md-nav__title" for="nav-6"> Developer Zone </label>
                    <ul class="md-nav__list" data-md-scrollfix>
                      <li class="md-nav__item"> <a href="../../dev/development.md" title="Dev Environment" class="md-nav__link"> Dev Environment </a> </li>
                      <li class="md-nav__item"> <a href="../../dev/contributing.md" title="Contributing" class="md-nav__link"> Contributing </a> </li>
                      <li class="md-nav__item"> <a href="https://github.com/daos-stack/daos/blob/master/src/README.md" title="DAOS Internals" class="md-nav__link"> DAOS Internals </a> </li>
                      <li class="md-nav__item"> <a href="../../html/" title="DAOS API Documentation" class="md-nav__link"> DAOS API Documentation </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="https://wiki.hpdd.intel.com" title="Community Wiki" class="md-nav__link"> Community Wiki </a> </li>
                <li class="md-nav__item"> <a href="https://wiki.hpdd.intel.com/display/DC/Roadmap/" title="Roadmap" class="md-nav__link"> Roadmap </a> </li>
                <li class="md-nav__item"> <a href="https://daos.groups.io/g/daos" title="Mailing list" class="md-nav__link"> Mailing list </a> </li>
                <li class="md-nav__item"> <a href="https://jira.hpdd.intel.com/projects/DAOS" title="Issue tracker" class="md-nav__link"> Issue tracker </a> </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <nav class="md-nav md-nav--secondary">
              <label class="md-nav__title" for="__toc">Table of contents</label>
              <ul class="md-nav__list" data-md-scrollfix>
                <li class="md-nav__item"> <a href="#daos-features" class="md-nav__link"> DAOS Features </a> </li>
                <li class="md-nav__item"> <a href="#daos-components" class="md-nav__link"> DAOS Components </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#daos-target-server-and-system" class="md-nav__link"> DAOS Target, Server and System </a> </li>
                      <li class="md-nav__item"> <a href="#storage-api-application-interface-and-tools" class="md-nav__link"> Storage API, Application Interface and Tools </a> </li>
                      <li class="md-nav__item"> <a href="#agent" class="md-nav__link"> Agent </a> </li>
                    </ul>
                  </nav>
                </li>
                <li class="md-nav__item"> <a href="#storage-model" class="md-nav__link"> Storage Model </a>
                  <nav class="md-nav">
                    <ul class="md-nav__list">
                      <li class="md-nav__item"> <a href="#daos-pool" class="md-nav__link"> DAOS Pool </a> </li>
                      <li class="md-nav__item"> <a href="#daos-container" class="md-nav__link"> DAOS Container </a> </li>
                      <li class="md-nav__item"> <a href="#daos-object" class="md-nav__link"> DAOS Object </a> </li>
                    </ul>
                  </nav>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
      <div class="md-content">
        <article class="md-content__inner md-typeset"> <a href="https://github.com/daos-stack/daos/edit/master/docs/admin/architecture.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
          <h1 id="daos-architecture">DAOS Architecture<a class="headerlink" href="#daos-architecture" title="Permanent link">&para;</a></h1>
          <p>DAOS is an open-source software-defined scale-out object store that provides high bandwidth and high IOPS storage containers to applications and enables next-generation data-centric workflows combining simulation, data analytics, and machine learning.</p>
          <p>Unlike the traditional storage stacks that were primarily designed for
            rotating media, DAOS is architected from the ground up to exploit new
            NVM technologies and is extremely lightweight since it operates
            End-to-End (E2E) in user space with full OS bypass. DAOS offers a shift
            away from an I/O model designed for block-based and high-latency storage
            to one that inherently supports fine-grained data access and unlocks the
            performance of the next-generation storage technologies.</p>
          <p>Unlike traditional Burst Buffers, DAOS is a high-performant independent
            and fault-tolerant storage tier that does not rely on a third-party tier
            to manage metadata and data resilience.</p>
          <h2 id="daos-features">DAOS Features<a class="headerlink" href="#daos-features" title="Permanent link">&para;</a></h2>
          <p>DAOS relies on OFI for low-latency communications and stores data on
            both storage-class memory and NVMe storage. DAOS presents a native
            key-array-value storage interface that offers a unified storage model
            over which domain-specific data models are ported, such as HDF5, MPI-IO,
            and Apache Arrow. A POSIX I/O emulation layer implementing files and
            directories over the native DAOS API is also available.</p>
          <p>DAOS I/O operations are logged and then inserted into a persistent index
            maintained in SCM. Each I/O is tagged with a particular timestamp called
            epoch and is associated with a particular version of the dataset. No
            read-modify-write operations are performed internally. Write operations
            are non-destructive and not sensitive to alignment. Upon read request,
            the DAOS service walks through the persistent index and creates a
            complex scatter-gather Remote Direct Memory Access (RDMA) descriptor to
            reconstruct the data at the requested version directly in the buffer
            provided by the application.</p>
          <p>The SCM storage is memory-mapped directly into the address space of the
            DAOS service that manages the persistent index via direct load/store.
            Depending on the I/O characteristics, the DAOS service can decide to
            store the I/O in either SCM or NVMe storage. As represented in Figure
            2‑1, latency-sensitive I/Os, like application metadata and byte-granular
            data, will typically be stored in the former, whereas checkpoints and
            bulk data will be stored in the latter. This approach allows DAOS to
            deliver the raw NVMe bandwidth for bulk data by streaming the data to
            NVMe storage and maintaining internal metadata index in SCM. The
            Persistent Memory Development Kit (PMDK)<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup> allows managing
            transactional access to SCM and the Storage Performance Development Kit
            (SPDK)<sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup> enables user-space I/O to NVMe devices.</p>
          <p><img alt="" src="../media/image1.png" /> Figure 2‑1. DAOS Storage</p>
          <p>DAOS aims at delivering:</p>
          <ul>
            <li>
              <p>High throughput and IOPS at arbitrary alignment and size</p>
            </li>
            <li>
              <p>Fine-grained I/O operations with true zero-copy I/O to SCM</p>
            </li>
            <li>
              <p>Support for massively distributed NVM storage via scalable
                collective communications across the storage servers</p>
            </li>
            <li>
              <p>Non-blocking data and metadata operations to allow I/O and
                computation to overlap</p>
            </li>
            <li>
              <p>Advanced data placement taking into account fault domains</p>
            </li>
            <li>
              <p>Software-managed redundancy supporting both replication and erasure
                code with an online rebuild</p>
            </li>
            <li>
              <p>End-to-end data integrity</p>
            </li>
            <li>
              <p>Scalable distributed transactions with guaranteed data consistency
                and automated recovery</p>
            </li>
            <li>
              <p>Dataset snapshot</p>
            </li>
            <li>
              <p>Security framework to manage access control to storage pools</p>
            </li>
            <li>
              <p>Software-defined storage management to provision, configure, modify
                and monitor storage pools over COTS hardware</p>
            </li>
            <li>
              <p>Native support for Hierarchical Data Format (HDF)5, MPI-IO and POSIX
                namespace over the DAOS data model</p>
            </li>
            <li>
              <p>Tools for disaster recovery</p>
            </li>
            <li>
              <p>Seamless integration with the Lustre parallel filesystem</p>
            </li>
            <li>
              <p>Mover agent to migrate datasets among DAOS pools and from parallel
                filesystems to DAOS and vice versa</p>
            </li>
          </ul>
          <h2 id="daos-components">DAOS Components<a class="headerlink" href="#daos-components" title="Permanent link">&para;</a></h2>
          <p>A data center may have hundreds of thousands of compute nodes
            interconnected via a scalable high-performance fabric, where all, or a
            subset of the nodes called storage nodes, have direct access to NVM
            storage. A DAOS installation involves several components that can be
            either collocated or distributed.</p>
          <h3 id="daos-target-server-and-system">DAOS Target, Server and System<a class="headerlink" href="#daos-target-server-and-system" title="Permanent link">&para;</a></h3>
          <p>The DAOS server is a multi-tenant daemon running on a Linux instance
            (i.e. natively on the physical node or in a VM or container) of each
            storage node and exporting through the network the locally-attached NVM
            storage. It listens to a management port, addressed by an IP address and
            a TCP port number, plus one or more fabric endpoints, addressed by
            network URIs. The DAOS server is configured through a YAML file and can
            be integrated with different daemon management or orchestration
            frameworks (e.g., a systemd script, a Kubernetes service or even via a
            parallel launcher like pdsh or srun).</p>
          <p>A DAOS system is identified by a system name and consists of a set of
            DAOS servers connected to the same fabric. Membership of the DAOS
            servers is recorded into the system map that assigns a unique integer
            rank to each server. Two different systems comprise two disjoint sets of
            servers and do not coordinate with each other.</p>
          <p>Inside a DAOS server, the storage is statically partitioned across
            multiple targets to optimize concurrency. To avoid contention, each
            target has its private storage, own pool of service threads and
            dedicated network context that can be directly addressed over the fabric
            independently of the other targets hosted on the same storage node. A
            target is typically associated with a single-ported SCM module and NVMe
            SSD attached to a single storage node. Moreover, a target does not
            implement any internal data protection mechanism against storage media
            failure. As a result, a target is a single point of failure. A dynamic
            state is associated with each target and is set to either up and
            running, or down and not available.</p>
          <p>A target is the unit of performance. Hardware components associated with
            the target, such as the backend storage medium, the server, and the
            network, have limited capability and capacity.</p>
          <p>The number of targets exported by a DAOS server instance is configurable
            and depends on the underlying hardware (i.e., the number of SCM modules,
            CPUs, NVMe SSDs ...). A target is the unit of fault.</p>
          <h3 id="storage-api-application-interface-and-tools">Storage API, Application Interface and Tools<a class="headerlink" href="#storage-api-application-interface-and-tools" title="Permanent link">&para;</a></h3>
          <p>Applications, users, and administrators can interact with a DAOS system
            through two different client APIs. The management API offers the ability
            to administrate a DAOS system. It is intended to be integrated with
            different vendor-specific storage management or open-source
            orchestration frameworks. A CLI tool is built over the DAOS management
            API. On the other hand, the DAOS library (i.e., libdaos) implements the
            DAOS storage model and is primarily targeted at application and I/O
            middleware developers who want to store datasets in a DAOS system. User
            utilities are also built over the API to allow users to manage datasets
            from a CLI.</p>
          <p>Applications can access datasets stored in DAOS either directly through
            the native DAOS API or an I/O middleware libraries (e.g. POSIX
            emulation, MPI-IO, HDF5) or frameworks (e.g., Spark, TensorFlow) already
            integrated with the native DAOS storage model.</p>
          <h3 id="agent">Agent<a class="headerlink" href="#agent" title="Permanent link">&para;</a></h3>
          <p>The DAOS agent is a daemon residing on the client node that interacts
            with the DAOS library to authenticate the application process. It is a
            trusted entity that can sign the DAOS Client credentials using
            certificates. The agent can support different authentication frameworks
            and uses a Unix Domain Socket to communicate with the client library.</p>
          <h2 id="storage-model">Storage Model<a class="headerlink" href="#storage-model" title="Permanent link">&para;</a></h2>
          <p>A DAOS pool is a storage reservation distributed across a collection of
            targets. The actual space allocated to the pool on each target is called
            a pool shard. The total space allocated to a pool is decided at creation
            time and can be expanded over time by resizing all the pool shards
            (within the limit of the storage capacity dedicated to each target) or
            by spanning more targets (i.e., adding more pool shards). A pool offers
            storage virtualization and is the unit of provisioning and isolation.
            DAOS pools cannot span across multiple systems.</p>
          <p>A pool can host multiple transactional object store called DAOS
            containers. Each container is a private object address space, which can
            be modified transactional and independently of the other containers
            stored in the same pool. A container is the unit of snapshot and data
            management. DAOS objects belonging to a container can be distributed
            across any target of the pool for both performance and resilience and
            can be accessed through different APIs to represent
            structured, semi-structured and unstructured data efficiently.</p>
          <p>Figure 2‑2 illustrates the different DAOS abstractions.</p>
          <p><img alt="Fig_001.png" src="../media/image2.png" /></p>
          <p>Figure 2‑2. Example of
            four Storage Nodes, eight DAOS Targets, and three DAOS Pools</p>
          <p>Table 2‑1 shows the targeted level of scalability for each DAOS
            abstraction.</p>
          <p>Table 2‑1. DAOS
            Scalability</p>
          <table>
            <thead>
              <tr>
                <th>DAOS Concept</th>
                <th>Component Order of Magnitude Limit</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>System</td>
                <td>10<sup>2</sup> Pools (hundreds)</td>
              </tr>
              <tr>
                <td>Pool</td>
                <td>10<sup>2</sup> Containers (hundreds)</td>
              </tr>
              <tr>
                <td>Container</td>
                <td>10<sup>9</sup> Objects (billions)</td>
              </tr>
            </tbody>
          </table>
          <h3 id="daos-pool">DAOS Pool<a class="headerlink" href="#daos-pool" title="Permanent link">&para;</a></h3>
          <p>A Pool is identified by a unique UUID and maintains target memberships in the pool map stored in persistent memory. The pool map not only records the list of active targets, it also contains the storage topology under the form of a tree that is used to identify targets sharing common hardware components. For instance, the first level of the tree can represent targets sharing the same motherboard, and then the second level can represent all motherboards sharing the same rack and finally the third level can represent all racks in the same cage. This framework effectively represents hierarchical fault domains, which are then used to avoid placing redundant data on targets subject to correlated failures. At any point in time, new targets can be added to the pool map, and failed ones can be excluded. Moreover, the pool map is fully versioned, which effectively assigns a unique sequence to each modification of the map, more particularly for failed node removal.</p>
          <p>A pool shard is a reservation of NVM storage (i.e., SCM optionally
            combined with a pre-allocated space on NVMe storage) on a specific
            target. It has a fixed capacity and fails operations when full. Current
            space usage can be queried at any time and reports the total amount of
            bytes used by any data type stored in the pool shard. Space consumed on
            the different type of storage is reported separately.</p>
          <p>Upon target failure and exclusion from the pool map, data redundancy
            inside the pool is automatically restored while the pool remains online.
            Rebuild progress is recorded regularly in special logs in the pool
            stored in persistent memory to address cascading failures. When new
            targets are added, data is automatically migrated to the newly added
            targets to redistribute space usage equally among all the members. This
            process is known as space rebalancing and uses dedicated persistent logs
            as well to support interruption and restart. A pool is a set of targets
            spread across different storage nodes over which data and metadata are
            distributed to achieve horizontal scalability, and replicated or
            erasure-coded to ensure durability and availability.</p>
          <p>When creating a pool, a set of system properties must be defined to
            configure the different features supported by the pool. In addition,
            the user can define their own attributes that will be stored persistently.</p>
          <p>A pool is only accessible to authenticated and authorized applications.
            Multiple security frameworks could be supported, from NFSv4 access
            control lists to third party-based authentication (such as Kerberos).
            Security is enforced when connecting to the pool. Upon successful
            connection to the pool, a connection context is returned to the
            application process.</p>
          <p>A pool stores many different sorts of persistent metadata, such as the
            pool map, authentication, and authorization information, user attributes,
            properties, and rebuild logs. Such metadata are critical and require the
            highest level of resiliency. Therefore, the pool metadata are replicated
            on a few nodes from distinct high-level fault domains. For very large
            configurations with hundreds of thousands of storage nodes, only a very
            small fraction of those nodes (in the order of tens) run the pool
            metadata service. With a limited number of storage nodes, DAOS can
            afford to rely on a consensus algorithm to reach agreement and to
            guarantee consistency in the presence of faults and to avoid split-brain
            syndrome.</p>
          <h3 id="daos-container">DAOS Container<a class="headerlink" href="#daos-container" title="Permanent link">&para;</a></h3>
          <p>A container represents an object address space inside a pool and is
            identified by a UUID. Applications (i.e., directly or via I/O middleware,
            domain-specific data format, big data or AI frameworks) store all
            related datasets into a container which is the unit of storage
            management for the user.</p>
          <p>Like pools, containers can store user attributes and a set of
            properties must be passed at container creation time to configure
            different features like checksums.</p>
          <p>Objects in a container are identified by a unique 128-bit object address
            and may have different schemas for data distribution and redundancy over
            targets. Dynamic or static striping, replication or erasure code are
            some parameters required to define the object schema. The object class
            defines common schema attributes for a set of objects. Each object class
            is assigned a unique identifier and is associated with a given schema at
            the pool level. A new object class can be defined at any time with a
            configurable schema, which is then immutable after creation, or at least
            until all objects belonging to the class have been destroyed. For
            convenience, several object classes expected to be the most commonly
            used will be predefined by default when the pool is created, as shown in
            Table 2‑2.</p>
          <p>Table 2‑2. Sample of
            Pre-defined Object Classes</p>
          <table>
            <thead>
              <tr>
                <th>Object Class (RW = read/write, RM = read-mostly</th>
                <th>Redundancy</th>
                <th>Metadata in OIT, (SC = stripe count, RC = replica count, PC = parity count, TGT = target</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Small size &amp; RW</td>
                <td>Replication</td>
                <td>No (static SCxRC, e.g. 1x4)</td>
              </tr>
              <tr>
                <td>Small size &amp; RM</td>
                <td>Erasure code</td>
                <td>No (static SC+PC, e.g. 4+2)</td>
              </tr>
              <tr>
                <td>Large size &amp; RW</td>
                <td>Replication</td>
                <td>No (static SCxRC over max #targets)</td>
              </tr>
              <tr>
                <td>Large size &amp; RM</td>
                <td>Erasure code</td>
                <td>No (static SCx(SC+PC) w/ max #TGT)</td>
              </tr>
              <tr>
                <td>Unknown size &amp; RW</td>
                <td>Replication</td>
                <td>SCxRC (e.g. 1x4 initially and grows)</td>
              </tr>
              <tr>
                <td>Unknown size &amp; RM</td>
                <td>Erasure code</td>
                <td>SC+PC (e.g. 4+2 initially and grows)</td>
              </tr>
            </tbody>
          </table>
          <p>A container is the unit of transaction and snapshot. Container metadata
            (i.e. list of snapshots, container open handles, object class, user
            attributes, properties, etc.) are stored in persistent memory and
            maintained by a dedicated container metadata service that either uses
            the same replicated engine as the parent metadata pool service, or has
            its own engine.</p>
          <h3 id="daos-object">DAOS Object<a class="headerlink" href="#daos-object" title="Permanent link">&para;</a></h3>
          <p>To avoid scaling problems and overhead common to a traditional storage
            system, DAOS objects are intentionally simple. No default object
            metadata beyond the type and schema are provided. This means that the
            system does not maintain time, size, owner, permissions or even track
            openers. To achieve high availability and horizontal scalability, many
            object schemas (replication/erasure code, static/dynamic striping, and others)
            are provided. The schema framework is flexible and easily expandable to
            allow for new custom schema types in the future. The layout is generated
            algorithmically on an object open from the object identifier and the pool
            map. End-to-end integrity is assured by protecting object data with
            checksums during network transfer and storage.</p>
          <p>A DAOS object can be accessed through different native interfaces
            exported by libdaos: multi-level key-array, key-value or array APIs that
            allows representing efficiently structured, semi-structured or
            unstructured data.</p>
          <div class="footnote">
            <hr />
            <ol>
              <li id="fn:1">
                <p>http://pmem.io/pmdk/&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
              </li>
              <li id="fn:2">
                <p>http://www.spdk.io/&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
              </li>
            </ol>
          </div>
        </article>
      </div>
    </div>
  </main>
  <footer class="md-footer">
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright"> powered by <a href="https://www.mkdocs.org" target="_blank" rel="noopener">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener"> Material for MkDocs</a> </div>
      </div>
    </div>
  </footer>
</div>
<script src="../../assets/javascripts/application.c33a9706.js"></script> 
<script src="../../js/jquery-3.4.1.min.js"></script> 
<script src="../../js/popper.min.js"></script> 
<script src="../../js/bootstrap-4.4.1.js"></script> 
<script>app.initialize({version:"1.1.2",url:{base:".."}})</script>
</body>
</html>